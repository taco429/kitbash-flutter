# Kitbash CCG - Game Design Document

## Game Overview

**Title**: Kitbash CCG  
**Genre**: Online Multiplayer Collectible Card Game  
**Platform**: Cross-platform (Mobile, Desktop, Web)  
**Target Audience**: CCG enthusiasts, strategy gamers  

## Core Gameplay

### Objective
Players build decks from their collection and battle opponents on a tactical grid with simultaneous order resolution. The goal is to destroy the opponent's Command Center by deploying units, casting spells, and executing tactics.


### Game Flow
1. **Deck Building**: Players construct 30-40 card decks
2. **Matchmaking**: Find opponents via REST API
3. **Battle**: Simultaneous planning (orders lock-in) and server-resolved rounds over WebSocket

4. **Victory**: Destroy the opponent's Command Center

## Game Mechanics

### Basic Rules
- **Command Center Health**: 100 (tunable)
- **Hand Size**: 7 cards (max 10)
- **Deck Size**: 30-40 cards
- **Deck Exhaustion**: When your deck is empty, shuffle your discard pile to form a new deck; your Command Center loses 25 HP.

- **Round Timing**: Planning phase 30s (tunable) with lock-in; resolution phase ~3s

- **Resources**: Mana (ephemeral) and Gold (persistent), generated by buildings each round


### Round Structure (Simultaneous Orders)
1. **Draw & Income**: Refill your hand by drawing until you reach your hand limit (default 7; hard cap 10). Reset Mana to 0; collect Mana and Gold from buildings (Tower and Command Center for Mana; Command Center and Barracks for Gold). Gold adds to your bank; Mana is available only for this round. If you would draw from an empty deck, immediately shuffle your discard pile to form a new deck and your Command Center loses 25 HP.

2. **Planning Phase**: Both sides simultaneously choose actions: play unit/structure cards into their deployment zone, queue spells/tactics, and assign unit abilities/targets as allowed. Players press Lock-In to commit. On Lock-In, you may discard any number of cards from your hand to your discard pile; these will be replenished during the next Draw & Income step up to your hand limit.

3. **Reveal & Resolve**:
   - Spells/tactics resolve in priority order (see Simultaneous Resolution Rules).

   - Summoned units and built structures enter the board.
   - Start-of-round triggers fire.
   - Units automatically move based on their movement stat and rules.
   - Combat resolves (ranged and melee) with simultaneous damage application.
4. **Cleanup**: End-of-round triggers, resolve deaths, apply status durations, discard down to hand limit if above.


### Board and Grid
- **Grid**: Default 11 columns × 13 rows (tunable). Bottom is Player A's side; top is Player B's side.

- **Coordinates**: (column, row) with col 0–10, row 0–12. Rows 0–2 are Player A's back/base rows; rows 10–12 are Player B's back/base rows.

- **Command Centers (CC)**: Each player has a CC occupying 1 tile in the center of their back row. Destroying the enemy CC wins the match.

- **Zones**:
  - **Side Buffer Columns (Not Base)**: Columns 0–1 and 9–10 are side buffers and are not considered part of either player's base.

  - **Base Zone**: Three back rows per side restricted to central columns 2–8 (rows 0–2 for Player A; rows 10–12 for Player B).

  - **Deployment Zone**: By default equals your Base Zone (rows 0–2 or 10–12 within columns 2–8) unless a card states otherwise.

  - **Neutral Zone**: Middle rows (3–9 by default) where engagements occur.

### Deployment Rules
- Play unit cards into empty tiles in your deployment zone, respecting any placement restrictions on the card.

- Structures (e.g., turrets, walls) are placed on your side and occupy tiles until destroyed.

- The Command Center's position is fixed; it cannot be moved or redeployed.

#### Starting Setup
- Each player begins with three pre-placed structures: Command Center (CC), Tower, and Barracks.

- Default placement (can be tuned per map):
  - Player A: CC at (5,0), Tower at (3,0), Barracks at (7,0).
  - Player B: CC at (5,12), Tower at (3,12), Barracks at (7,12).
- These are special starter buildings owned by all players and are not part of decks. If a default tile is blocked, place on the nearest valid tile within your Base Zone.


### Unit Movement
- **Speed (SPD)**: Units have a movement speed stat indicating tiles moved per round during the Resolve step (default 1 forward tile toward the enemy CC).

- **Default Pathing**: Units maintain their spawn column and advance toward the enemy unless their card specifies alternate behavior.

- **Blocking & Zones of Control (ZOC)**: Units cannot move through enemy-occupied tiles. If an enemy is adjacent in the direction of travel, the moving unit stops and may attack if in range. Units with Taunt project ZOC, preventing enemies from moving past adjacent tiles.

- **Lateral Movement**: Unless a unit has a keyword (e.g., Agile/Pathfinder), units do not sidestep. Special abilities may allow diagonal or lateral moves.

- **Flying**: Flying units ignore terrain and non-flying ZOC for movement but still respect engagement rules when ending movement.

- **Collisions**: If opposing units would enter the same tile during the same round, neither enters; both remain in their original tiles and proceed to combat if in range.


### Combat Resolution
- **Ranges**: Units have an attack range (RNG). Melee units have RNG 1 (adjacent); ranged units have higher RNG.

- **Order**: After movement, all attacks resolve simultaneously. Damage is applied concurrently; units reduced to 0 HP are destroyed even if their damage would also kill the attacker.

- **Targeting**: By default, units target the closest enemy unit in range along their lane; if none, they target the enemy CC when it is within range.

- **Structures**: Structures may attack or provide effects if specified. The Command Center may have passive defenses (tunable).


### Simultaneous Resolution Rules
- **Action Lock-In**: During Planning, each player (or team) submits orders. Once both lock in or the timer expires, orders are frozen for that round.

- **Priority for Non-Unit Effects**:
  1. Global effects and state-based cleanups
  2. Spells/Tactics (sorted by card-defined priority; ties alternate by round priority token)

  3. Summons/Structures enter play
  4. Start-of-round triggers
  5. Movement (see Collisions)
  6. On-move triggers (e.g., traps, auras)
  7. Combat (simultaneous damage)
  8. Death resolution and end-of-round triggers
- **Round Priority Token**: To ensure determinism, one side holds a priority token that alternates each round; it breaks remaining ties (e.g., same-cost spells, equal-speed interactions). Final ties break by server-seeded unit IDs.


### Card Types

#### 1. Units (formerly Creatures)
- Have Attack/Health values, plus Range (RNG) and Speed (SPD)
- Occupy grid tiles and auto-move each round during resolution
- Cannot be manually moved except by card effects
- May have special abilities and keywords that modify movement, targeting, or combat


#### 2. Spells / Tactics
- One-time effects declared in Planning, resolved in Reveal & Resolve per priority

- May target units, structures, tiles, or global state
- Go to graveyard after use

#### 3. Structures (includes Command Center)
- Permanent effects that occupy tiles (e.g., walls, turrets, generators)
- Remain on battlefield until destroyed
- Command Centers are unique structures that define victory; they cannot be moved


##### Starter Buildings
- **Command Center**: Generates both Mana and Gold each round based on its stats; cannot move.

- **Tower**: Generates Mana each round based on its Mana stat; typically has attack stats (DMG/RNG) and cannot move.

- **Barracks**: Generates Gold each round based on its Gold stat; cannot move.

#### 4. Auras / Attachments (formerly Enchantments)
- Buff/debuff effects attached to units, structures, or tiles
- Persistent until removed

### Resource System
- **Mana (Ephemeral)**: Generated at the start of each round by your Tower and Command Center according to their Mana stats. Mana resets to 0 at Cleanup and does not carry over between rounds.

- **Gold (Persistent)**: Generated at the start of each round by your Command Center and Barracks according to their Gold stats. Gold is banked and persists between rounds.

- **Card Costs**: Cards may require Mana, Gold, or both. You must have sufficient amounts of each required resource to play the card during the Planning Phase. 
- **Card Draw**: Limited to maintain balance

## Card Design

### Keywords/Abilities
- **Flying**: Ignores terrain and non-flying ZOC while moving; can be targeted by effects that hit flying units

- **Draw X**: Draw X more cards on your next turn
- **Taunt**: Projects ZOC; adjacent enemies must target this unit or cannot move past it

- **Range X**: Attacks targets up to X tiles away
- **Speed X**: Moves up to X tiles during the movement step
- **Knockback**: Pushes the target back on hit
- **Charge**: Moves forward before attacking
- **Overwatch**: Performs a reaction attack when an enemy enters its range during movement

- **Siege X**: Deals X extra damage to buildings
- **Stealth**: Slips past the first enemy unit it encounters
- **Protector**: Takes damage dealt to adjacent allied units
- **Summon**: May be placed outside your base but not in the opponent's base
- **Lifesteal X**: Heals itself by X each time it attacks
- **Armor X**: Reduces incoming damage by X
- **Pierce X**: Ignores up to X Armor on the target
- **Splash X**: Also deals X damage to enemy units adjacent to the primary target

- **Slow X**: Reduces the target's Speed by X until the end of the next round
- **Root**: Prevents the target from moving during its next movement step
- **Regenerate X**: Heals X at the end of each round
- **Evade**: Prevents the first attack against this unit each round
- **Critical Hit X%**: Has an X% chance to deal double damage
- **Multi-Strike X**: Attacks X times each attack step

### Activated Abilities
Activated abilities are optional actions on certain units that a player may select during the Planning Phase before Lock-In. Some abilities have a cost. These are intentionally less common to limit micromanagement and are typically usable once per round per unit unless otherwise specified.

- **Hold Position**: Toggle whether this unit advances during the movement step
- **Agile**: Move 1 column left or right before advancing
- **Rally X**: Give adjacent allied units +X ATK until end of round (Cost: 1 Mana)
- **Overcharge X**: Gain +X Speed until end of round (Cost: 1 Mana)
- **Fortify X**: Gain +X Armor until end of round (Cost: 1 Mana)
- **Smoke Bomb**: Gain Stealth until end of round (Cost: 1 Mana)
- **Repair X**: Heal an adjacent allied structure by X (Cost: 1 Mana)




## UI/UX Design

### Main Menu
- Play button (prominent)
- Collection manager
- Deck builder
- Store
- Profile/Stats
- Settings

### In-Game UI
```
┌─────────────────────────────────────────────────────────┐
│ Opponent Hand                                           │
├─────────────────────────────────────────────────────────┤
│ Rows 10–12: Opp Base (columns 2–8 are Base; 0–1 and 9–10 are Side Buffers)
│ Rows 3–9:   Neutral Zone
│ Rows 0–2:   Player Base (columns 2–8 are Base; 0–1 and 9–10 are Side Buffers)
│ Notes: CC at center column (5). Default: Tower at column 3, Barracks at column 7.

├─────────────────────────────────────────────────────────┤
│ Player Hand                                             │
└─────────────────────────────────────────────────────────┘
```


